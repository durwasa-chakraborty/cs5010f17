<!DOCTYPE html>
<html lang="en">

<head>

<meta charset="UTF-8">
<meta name="description" content="Northeastern University CS 5010">
<meta name="author" content="William D Clinger">
<!-- meta name="keywords" content="software" -->

<title>
  Why Proper Tail Recursion Matters
</title>

<link type="text/css"
      rel="stylesheet"
      href="cs5010.css" />

</head>

<body>

<!-- start of specific content -->

<div id="maincontent">
  <h3>
    Why Proper Tail Recursion Matters
  </h3>
  <div>
    <p>
      We'll use the <code>sieve.ps11</code> program to compute
      the number of primes less than powers of ten up to 100000.
      The table below reports times in seconds.
    </p>
    <div class="floatleft">
      <table class="center floatleft">
        <tr>
          <th>
            Implementation
          </th>
          <th>
            10
          </th>
          <th>
            100
          </th>
          <th>
            1000
          </th>
          <th>
            10000
          </th>
          <th>
            100000
          </th>
        </tr>
        <tr>
          <td>
            interpreter
          </td>
          <td>
            0.08
          </td>
          <td>
            0.11
          </td>
          <td>
            0.37
          </td>
          <td>
            stack overflow
          </td>
          <td>
            stack overflow
          </td>
        </tr>
        <tr>
          <td>
            compiler A
          </td>
          <td>
            1.03
          </td>
          <td>
            1.04
          </td>
          <td>
            1.04
          </td>
          <td>
            1.42
          </td>
          <td>
            25.94
          </td>
        </tr>
        <tr>
          <td>
            compiler B
          </td>
          <td>
            0.88
          </td>
          <td>
            0.88
          </td>
          <td>
            0.91
          </td>
          <td>
            0.99
          </td>
          <td>
            60.30
          </td>
        </tr>
      </table>
    </div>
    <p class="clear">
    </p>
    <p class="verticalspace">
      For small values of that input, the interpreter written in Java
      has an advantage over the compilers because Java starts up
      faster than the two implementations of Scheme used as back
      ends by compilers A and B.
      When the input is 1000, however, that interpreter
      takes a quarter of a second longer than when the input
      is 100.
      That means the interpreter is running at least an order of
      magnitude slower than the two compilers.
    </p>
    <p>
      When the input is 10000 or larger, the interpreter
      written in Java overflows its stack.
    </p>
    <p>
      Those stack overflows are occurring because implementations
      of Java are not properly tail recursive.
      Those stack overflows cannot be blamed on an inappropriate
      programming style, because the interpreter is written in
      idiomatic Java style.
      To get rid of those stack overflows, we'd have to rewrite
      the interpreter in an ugly Fortran-like style that no one
      would regard as good object-oriented style.
    </p>
    <p>
      With the compilers, there are no stack overflows because
      the intermediate language is Scheme, which is then compiled
      or interpreted by a properly tail recursive implementation
      of Scheme.
    </p>
  </div>
</div>
<div id="footer">
  <form action="tailProper3.html" class="inline">
    <input type="submit" value="PREV">
  </form>
  <br />
  <form action="tailProper5.html" class="inline">
    <input type="submit" value="NEXT">
  </form>
</div>

<!-- end of specific content -->

<p class="muchsmaller">
For debugging: 
<a href="http://validator.w3.org/check/referer">
Click here to validate.
</a>
</p>

</body>
</html>
